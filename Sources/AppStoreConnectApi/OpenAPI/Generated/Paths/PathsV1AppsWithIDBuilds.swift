// Generated by Create API
// https://github.com/CreateAPI/CreateAPI

import Foundation
import AppStoreConnectApiCore
import URLQueryEncoder

extension APIEndpoint.V1.Apps.WithID {
	public var builds: Builds {
		Builds(path: path + "/builds")
	}

	public struct Builds {
		/// Path: `/v1/apps/{id}/builds`
		public let path: String

		public func get(fieldsBuilds: [FieldsBuilds]? = nil, limit: Int? = nil) -> Request<AppStoreConnectApi.BuildsWithoutIncludesResponse> {
			Request(path: path, method: "GET", query: makeGetQuery(fieldsBuilds, limit), id: "apps_builds_getToManyRelated")
		}

		private func makeGetQuery(_ fieldsBuilds: [FieldsBuilds]?, _ limit: Int?) -> [(String, String?)] {
			let encoder = URLQueryEncoder()
			encoder.encode(fieldsBuilds, forKey: "fields[builds]", explode: false)
			encoder.encode(limit, forKey: "limit")
			return encoder.items
		}

		public enum FieldsBuilds: String, Codable, CaseIterable {
			case version
			case uploadedDate
			case expirationDate
			case expired
			case minOsVersion
			case lsMinimumSystemVersion
			case computedMinMacOsVersion
			case computedMinVisionOsVersion
			case iconAssetToken
			case processingState
			case buildAudienceType
			case usesNonExemptEncryption
			case preReleaseVersion
			case individualTesters
			case betaGroups
			case betaBuildLocalizations
			case appEncryptionDeclaration
			case betaAppReviewSubmission
			case app
			case buildBetaDetail
			case appStoreVersion
			case icons
			case buildBundles
			case perfPowerMetrics
			case diagnosticSignatures
		}
	}
}
